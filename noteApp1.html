<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Note App 7/22</title>
</head>
<body>
  <h1>Note App 7/22</h1>
  <form class="" action="index.html" method="post">
    <input type="text" name="name" value="">
    <input id="makeButton" type="button" name="name" value="make a note">
    <input id= "findButton" type="button" name="name" value="find a note">
    <input id="deleteButton" type="button" name="name" value="delete all notes">
  </form>
  <ul>
  </ul>
</body>

<script type="text/javascript">
  var makeButton = document.getElementById("makeButton");
  var findButton = document.getElementById("findButton");
  var deleteButton = document.getElementById("deleteButton");
  var text = document.querySelector("input[type='text']");

  window.onload = init();

  function init(){
    console.log('window loaded');
    for(i = 0; i < localStorage.length; i++){
      var key = localStorage.key(i);
      var value = localStorage[key];
      displayNote(key,value);
    }
  }

  makeButton.addEventListener("click", function(e) {
    // var eventTimeStamp = e.timeStamp;
    makeNewID();
    text.value = "";
  })

  function makeNewID(){
    var currentTime = new Date().getTime();
    var newID = currentTime.toString() + Math.random();
    createNote(newID);
  }

  function createNote(key) {
    var value = text.value;
    setToStorage(key,value);
  }

  function setToStorage(key,value){
    var newKey = "note #" + key;
    localStorage[newKey] = value;
    console.log(localStorage);
    displayNote(newKey, value)

  }

  function displayNote(key,value) {
    var ul = document.querySelector("ul");
    var li = document.createElement("li");
    var span = document.createElement("span");
    span.innerHTML = key + ": " + value;
    li.setAttribute("data-note", key);
    li.appendChild(span);
    ul.appendChild(li);

    var LI_get_Attr = li.getAttribute("data-note");
    middleMan_LI_Data(LI_get_Attr);
  }

  //
  // function findNotes(){
  //   for(i = 0; i < localStorage.length; i++){
  //     var key = localStorage.key(i);
  //     if(key.substring(0,4) === "note"){
  //       var value = localStorage[key];
  //       console.log(key, value);
  //       // displayNote(key, value);
  //     }
  //   }
  // }
  //
  // findButton.addEventListener("click", function(){
  //   console.log('clicked on find');
  //   findNotes();
  //
  // })
  //
  function deleteAllNotes(){
    localStorage.clear();
    console.log(localStorage);
  }

  function middleMan_LI_Data(LI_get_Attr){
    for(i = 0; i < localStorage.length; i++){
      var key = localStorage.key(i);
      if(key === LI_get_Attr){
        console.log('we have a match');
      }
    }
  }

  function deleteSelectedNote(){

  }

  deleteButton.addEventListener("click", function(){
    deleteAllNotes();
  })

</script>

</html>
